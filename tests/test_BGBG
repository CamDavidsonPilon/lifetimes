import pytest
import lifetimes.generate_data as gen
import lifetimes.estimation as est
from lifetimes.data_compression import compress_conversion_data

@pytest.mark.BGBG
def test_BGBG_fitting_compressed_or_not():
    T = 30
    size = 100

    params = {'alpha': 1.2, 'beta': 0.7, 'gamma': 0.6, 'delta': 2.7, 'epsilon': 1.0, 'zeta': 10.0}

    data = gen.bgbg_model(T, params['alpha'], params['beta'], params['gamma'], params['delta'], size=size)

    compressed_data = compress_conversion_data(data)
    fitter_compressed = est.BGBGitter()

    fitter_compressed.fit(compressed_data['T'], compressed_data['conversion_instant'], N=compressed_data['N'])


